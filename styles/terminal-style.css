/* ====================================
   CYBERPUNK TERMINAL STYLE - FIXED ICONS
   Black and Green with ASCII effects
   ==================================== */

/* Import monospace fonts for terminal effect */
@import url('https://fonts.googleapis.com/css2?family=Courier+Prime:ital,wght@0,400;0,700;1,400;1,700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Ubuntu+Mono&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Roboto+Mono&display=swap');
@import url('https://fonts.googleapis.com/css2?family=PT+Mono&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Space+Mono&display=swap');
@import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Mono&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Fira+Mono&display=swap');
@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Cutive+Mono&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Overpass+Mono&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
@import url('https://fonts.googleapis.com/css2?family=VT323&display=swap');

/* Local system fonts (fallbacks) */
body {
    font-family: 'Courier Prime', 'Share Tech Mono', 'Consolas', 'Menlo', 'Monaco', monospace;
}

/* IMPORTANT: Ensure Font Awesome is loaded */
@import url('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css');

/* CSS Variables for easy configuration */
:root {
  --terminal-bg: #000000;
  --terminal-primary: #009900;
  --terminal-secondary: #006600;
  --terminal-dim: #003300;
  --terminal-text: #008800;
  --terminal-warning: #cccc00;
  --terminal-error: #cc0000;
  --terminal-border: #008800;
  --terminal-font: 'Courier Prime', 'Share Tech Mono', monospace;
  --terminal-glow: 0 0 2px #009900, 0 0 4px #009900, 0 0 6px #009900;
  --terminal-text-shadow: 0 0 1px #009900;
  --terminal-font-size: 22px;
}

/* SPECIFIC EXCLUSIONS FOR ICONS - VERY IMPORTANT */
/* DO NOT apply terminal styles to icon elements */
i, .fa, .fas, .far, .fab, .fal, .fad, .fass, .fasr, .fasl,
[class*="fa-"]:before,
[class^="fa-"]:before,
.icon:before,
.fas:before, .far:before, .fab:before, .fal:before, .fad:before {
  font-family: "Font Awesome 6 Free", "Font Awesome 6 Pro", "Font Awesome 5 Free", "Font Awesome 5 Pro", "Font Awesome 5 Brands", "FontAwesome" !important;
  font-weight: 900 !important; /* Font Awesome needs specific font-weight */
  font-style: normal !important;
  font-variant: normal !important;
  text-rendering: auto !important;
  line-height: 1 !important;
  -webkit-font-smoothing: antialiased !important;
  -moz-osx-font-smoothing: grayscale !important;
  display: inline-block !important;
  text-decoration: none !important;
  background: none !important;
  background-color: transparent !important;
}

/* Base class for terminal style - COMPLETELY EXCLUDE ICONS */
.cyberpunk {
  font-family: var(--terminal-font) !important;
  font-size: var(--terminal-font-size) !important;
}

.cyberpunk *:not(i):not(.fa):not(.fas):not(.far):not(.fab):not(.fal):not(.fad):not(.fass):not(.fasr):not(.fasl):not([class*="fa-"]):not([class^="fa-"]):not(.icon) {
  font-family: var(--terminal-font) !important;
  font-size: var(--terminal-font-size) !important;
}

/* SPECIFIC RULES FOR ICONS - Completely preserve Font Awesome */
.cyberpunk i,
.cyberpunk .fa, .cyberpunk .fas, .cyberpunk .far, .cyberpunk .fab,
.cyberpunk .fal, .cyberpunk .fad, .cyberpunk .fass, .cyberpunk .fasr, .cyberpunk .fasl,
.cyberpunk [class*="fa-"], .cyberpunk [class^="fa-"],
.cyberpunk .icon,
i.fas, i.far, i.fab, i.fal, i.fad, i.fass, i.fasr, i.fasl {
  font-family: "Font Awesome 6 Free", "Font Awesome 6 Pro", "Font Awesome 5 Free", "Font Awesome 5 Pro", "Font Awesome 5 Brands", "FontAwesome" !important;
  font-weight: 900 !important;
  font-style: normal !important;
  font-variant: normal !important;
  text-rendering: auto !important;
  line-height: 1 !important;
  -webkit-font-smoothing: antialiased !important;
  -moz-osx-font-smoothing: grayscale !important;
  display: inline-block !important;
  text-decoration: none !important;
  background: none !important;
  background-color: transparent !important;
  text-shadow: none !important;
  filter: none !important;
  /* Allow color inheritance for functional icons */
  color: inherit !important;
}



#chat,
#chat *,
#chat-log,
#chat-log *,
#chat-log ol,
#chat-log ol *,
#chat-log li,
#chat-log li * {
  background-color: var(--terminal-bg) !important;
  background: var(--terminal-bg) !important;
  background-image: none !important;
}

.app.window-app {
  border: 2px solid var(--terminal-primary) !important;
  box-shadow: var(--terminal-glow) !important;
}

#chat {
  border: 2px solid var(--terminal-border) !important;
  box-shadow: var(--terminal-glow) !important;
}

#chat-log {
  color: var(--terminal-text) !important;
  font-family: var(--terminal-font) !important;
  font-size: var(--terminal-font-size) !important;
}

.message-sender {
  color: var(--terminal-primary) !important;
}

.message-timestamp {
  color: var(--terminal-primary) !important;
}

/* NUCLEAR OVERRIDE FOR BACKGROUND - Apply to absolutely EVERYTHING in chat */
#chat *, 
#chat-log *, 
#chat-log ol *, 
#chat-log li *,
#chat-log .message *,
#chat-log .message-content *,
#chat-log .message-header *,
#chat-log div *,
#chat-log span *,
#chat-log p *,
#chat-log a *,
#chat-log section *,
#chat-log article *,
#chat-log header *,
#chat-log footer * {
  background-color: var(--terminal-bg) !important;
  background: var(--terminal-bg) !important;
  background-image: none !important;
  background-attachment: initial !important;
  background-clip: initial !important;
  background-origin: initial !important;
  background-position: initial !important;
  background-repeat: initial !important;
  background-size: initial !important;
}

/* NUCLEAR OVERRIDE FOR TEXT COLOR - Use --terminal-text for normal text */
#chat-log *, 
#chat-log ol *, 
#chat-log li *,
#chat-log .message *,
#chat-log .message-content *,
#chat-log div *,
#chat-log span *,
#chat-log p *,
#chat-log a *,
#chat-log section *,
#chat-log article * {
  color: var(--terminal-text) !important;
}

/* Exclude only Font Awesome icons */
#chat i,
#chat .fa, #chat .fas, #chat .far, #chat .fab, #chat .fal, #chat .fad,
#chat [class*="fa-"], #chat [class^="fa-"],
#chat-log i,
#chat-log .fa, #chat-log .fas, #chat-log .far, #chat-log .fab, #chat-log .fal, #chat-log .fad,
#chat-log [class*="fa-"], #chat-log [class^="fa-"] {
  background: none !important;
  background-color: transparent !important;
  color: var(--terminal-primary) !important;
}

/* Specific colors for chat elements - Use --terminal-primary for highlights */
#chat-log {
  color: var(--terminal-text) !important;
}

/* Individual messages */
#chat-log .message {
  border-bottom: 1px solid var(--terminal-dim) !important;
  padding: 12px !important;
  color: var(--terminal-text) !important;
}

/* Headers and senders - Highlighted */
#chat-log .message .message-header,
#chat-log .message .message-sender,
#chat-log .message-sender {
  color: var(--terminal-primary) !important;
  font-weight: bold !important;
  text-shadow: var(--terminal-text-shadow) !important;
  font-size: var(--terminal-font-size) !important;
}

/* Message content - Normal text */
#chat-log .message .message-content,
#chat-log .message-content {
  color: var(--terminal-text) !important;
  font-size: var(--terminal-font-size) !important;
  font-family: var(--terminal-font) !important;
}

/* Timestamps and metadata */
#chat-log .message .message-timestamp,
#chat-log .message .message-metadata,
#chat-log .message-timestamp,
#chat-log .message-metadata {
  color: var(--terminal-secondary) !important;
  font-size: calc(var(--terminal-font-size) - 2px) !important;
}

/* Dice and rolls */
#chat-log .dice-roll,
#chat-log .dice-result,
#chat-log .dice-total {
  color: var(--terminal-warning) !important;
  border: 1px solid var(--terminal-border) !important;
  text-shadow: 0 0 2px var(--terminal-warning) !important;
}

#chat-log .dice-formula {
  color: var(--terminal-primary) !important;
}

/* Whispers */
#chat-log .whisper-to,
#chat-log .message.whisper {
  color: var(--terminal-secondary) !important;
  border-left: 3px solid var(--terminal-secondary) !important;
}

/* Flavor text */
#chat-log .flavor-text {
  color: var(--terminal-primary) !important;
  font-style: italic !important;
}

/* Ultra aggressive universal selector as last resort for background */
#chat-log > * {
  background-color: var(--terminal-bg) !important;
  background: var(--terminal-bg) !important;
}

#chat-log > * > * {
  background-color: var(--terminal-bg) !important;
  background: var(--terminal-bg) !important;
}

#chat-log > * > * > * {
  background-color: var(--terminal-bg) !important;
  background: var(--terminal-bg) !important;
}

.dice {
  background-color: var(--terminal-text) !important;
}

.dice-tray__button {
  background-color: var(--terminal-bg) !important;
  border: 1px solid var(--terminal-border) !important;
}

.dice-tray__button .dice {
  background-color: var(--terminal-text) !important;
}

.message-content {
  color: var(--terminal-text) !important;
}

#chat-log > * > * > * > * {
  background-color: var(--terminal-bg) !important;
  background: var(--terminal-bg) !important;
}

#chat-form {
  background-color: var(--terminal-bg) !important;
  border-top: 2px solid var(--terminal-border) !important;
}

#chat-message {
  background-color: var(--terminal-bg) !important;
  color: var(--terminal-text) !important;
  border: 1px solid var(--terminal-border) !important;
  font-family: var(--terminal-font) !important;
  font-size: var(--terminal-font-size) !important;
  caret-color: var(--terminal-primary) !important;
}

/* === STYLES FOR POPUP/ROLL DIALOG - NUCLEAR METHOD === */
/* Chat popup/notification when chat is not visible */
#chat-popout,
.chat-popout,
#dice-notification,
.dice-notification,
#chat .dice-tooltip,
.dice-tooltip,
.chat-popup {
  background-color: var(--terminal-bg) !important;
  background: var(--terminal-bg) !important;
  background-image: none !important;
  border: 2px solid var(--terminal-border) !important;
  box-shadow: var(--terminal-glow) !important;
  color: var(--terminal-text) !important;
  font-family: var(--terminal-font) !important;
  font-size: var(--terminal-font-size) !important;
}

/* NUCLEAR METHOD for popup background - Apply to EVERYTHING inside popup */
#chat-popout *,
.chat-popout *,
#dice-notification *,
.dice-notification *,
.dice-tooltip *,
.chat-popup *,
#chat-popout div *,
.chat-popout div *,
#dice-notification div *,
.dice-notification div *,
#chat-popout span *,
.chat-popout span *,
#dice-notification span *,
.dice-notification span *,
#chat-popout p *,
.chat-popout p *,
#dice-notification p *,
.dice-notification p *,
#chat-popout header *,
.chat-popout header *,
#dice-notification header *,
.dice-notification header * {
  background-color: var(--terminal-bg) !important;
  background: var(--terminal-bg) !important;
  background-image: none !important;
  background-attachment: initial !important;
  background-clip: initial !important;
  background-origin: initial !important;
  background-position: initial !important;
  background-repeat: initial !important;
  background-size: initial !important;
}

/* NUCLEAR METHOD for popup text color - Use --terminal-text for normal */
#chat-popout *,
.chat-popout *,
#dice-notification *,
.dice-notification *,
.dice-tooltip *,
.chat-popup *,
#chat-popout div *,
.chat-popout div *,
#dice-notification div *,
.dice-notification div *,
#chat-popout span *,
.chat-popout span *,
#dice-notification span *,
.dice-notification span *,
#chat-popout p *,
.chat-popout p *,
#dice-notification p *,
.dice-notification p *,
#chat-popout section *,
.chat-popout section *,
#dice-notification section *,
.dice-notification section * {
  color: var(--terminal-text) !important;
}

/* Specific popup elements - MORE AGGRESSIVE, highlights with primary */
#chat-popout .message-header,
.chat-popout .message-header,
#dice-notification .message-header,
.dice-notification .message-header,
.chat-popup .message-header,
#chat-popout .message-sender,
.chat-popout .message-sender,
#dice-notification .message-sender,
.dice-notification .message-sender,
.chat-popup .message-sender,
#chat-popout header,
.chat-popout header,
#dice-notification header,
.dice-notification header,
.chat-popup header {
  color: var(--terminal-primary) !important;
  background-color: var(--terminal-bg) !important;
  background: var(--terminal-bg) !important;
  font-weight: bold !important;
  text-shadow: var(--terminal-text-shadow) !important;
}

/* Message content in popup - Normal text */
#chat-popout .message-content,
.chat-popout .message-content,
#dice-notification .message-content,
.dice-notification .message-content,
.chat-popup .message-content {
  color: var(--terminal-text) !important;
  font-family: var(--terminal-font) !important;
}

/* Dice in popup */
#chat-popout .dice-roll,
.chat-popout .dice-roll,
#dice-notification .dice-roll,
.dice-notification .dice-roll,
.chat-popup .dice-roll,
#chat-popout .dice-result,
.chat-popout .dice-result,
#dice-notification .dice-result,
.dice-notification .dice-result,
.chat-popup .dice-result,
#chat-popout .dice-total,
.chat-popout .dice-total,
#dice-notification .dice-total,
.dice-notification .dice-total,
.chat-popup .dice-total {
  color: var(--terminal-warning) !important;
  border: 1px solid var(--terminal-border) !important;
  text-shadow: 0 0 2px var(--terminal-warning) !important;
  background-color: var(--terminal-bg) !important;
}

/* Ultra aggressive universal selectors for popup background as last resort */
#chat-popout > * {
  background-color: var(--terminal-bg) !important;
  background: var(--terminal-bg) !important;
}

#chat-popout > * > * {
  background-color: var(--terminal-bg) !important;
  background: var(--terminal-bg) !important;
}

#chat-popout > * > * > * {
  background-color: var(--terminal-bg) !important;
  background: var(--terminal-bg) !important;
}

.chat-popout > * {
  background-color: var(--terminal-bg) !important;
  background: var(--terminal-bg) !important;
}

.chat-popout > * > * {
  background-color: var(--terminal-bg) !important;
  background: var(--terminal-bg) !important;
}

#dice-notification > * {
  background-color: var(--terminal-bg) !important;
  background: var(--terminal-bg) !important;
}

/* === SPECIFIC STYLES FOR CHAT POPUP - TOTAL BACKGROUND === */
/* Main popout container - FORCE BLACK BACKGROUND */
.chat-popout {
  background-color: var(--terminal-bg) !important;
  background: var(--terminal-bg) !important;
  background-image: none !important;
  border: 2px solid var(--terminal-border) !important;
  box-shadow: var(--terminal-glow) !important;
  color: var(--terminal-text) !important;
  font-family: var(--terminal-font) !important;
}

/* NUCLEAR METHOD - EVERYTHING inside popout black background */
.chat-popout,
.chat-popout *,
.chat-popout div,
.chat-popout div *,
.chat-popout span,
.chat-popout span *,
.chat-popout section,
.chat-popout section *,
.chat-popout article,
.chat-popout article *,
.chat-popout header,
.chat-popout header *,
.chat-popout main,
.chat-popout main *,
.chat-popout .window-content,
.chat-popout .window-content *,
.chat-popout .window-app,
.chat-popout .window-app * {
  background-color: var(--terminal-bg) !important;
  background: var(--terminal-bg) !important;
  background-image: none !important;
  background-attachment: initial !important;
  background-clip: initial !important;
  background-origin: initial !important;
  background-position: initial !important;
  background-repeat: initial !important;
  background-size: initial !important;
}

/* NUCLEAR METHOD for popout text color - Normal text */
.chat-popout div,
.chat-popout div *,
.chat-popout span,
.chat-popout span *,
.chat-popout section,
.chat-popout section *,
.chat-popout article,
.chat-popout article *,
.chat-popout main,
.chat-popout main *,
.chat-popout .window-content,
.chat-popout .window-content * {
  color: var(--terminal-text) !important;
}

/* Ultra aggressive universal selectors for popout background */
.chat-popout > * {
  background-color: var(--terminal-bg) !important;
  background: var(--terminal-bg) !important;
}

.chat-popout > * > * {
  background-color: var(--terminal-bg) !important;
  background: var(--terminal-bg) !important;
}

.chat-popout > * > * > * {
  background-color: var(--terminal-bg) !important;
  background: var(--terminal-bg) !important;
}

.chat-popout > * > * > * > * {
  background-color: var(--terminal-bg) !important;
  background: var(--terminal-bg) !important;
}

/* Style for header - Highlighted */
.chat-popup-header,
.chat-popout .window-title,
.chat-popout-header {
  background-color: var(--terminal-bg) !important;
  background: var(--terminal-bg) !important;
  color: var(--terminal-primary) !important;
  border-bottom: 1px solid var(--terminal-border) !important;
  padding: 10px !important;
  font-size: var(--terminal-font-size) !important;
  font-family: var(--terminal-font) !important;
  font-weight: bold !important;
  text-shadow: var(--terminal-text-shadow) !important;
}

/* Style for chat body - Normal text */
.chat-popup-body,
.chat-popout-body,
.chat-popout .window-content {
  background-color: var(--terminal-bg) !important;
  background: var(--terminal-bg) !important;
  color: var(--terminal-text) !important;
  padding: 15px !important;
  font-size: var(--terminal-font-size) !important;
  font-family: var(--terminal-font) !important;
  max-height: 300px !important;
  overflow-y: auto !important;
}

/* Style for chat footer */
.chat-popup-footer {
  background-color: var(--terminal-bg) !important;
  background: var(--terminal-bg) !important;
  border-top: 1px solid var(--terminal-border) !important;
  padding: 10px !important;
  text-align: right !important;
}

/* Style for messages */
.chat-popup-message {
  background-color: var(--terminal-bg) !important;
  background: var(--terminal-bg) !important;
  border: 1px solid var(--terminal-border) !important;
  border-radius: 0px !important;
  margin: 5px 0 !important;
  padding: 10px !important;
  color: var(--terminal-text) !important;
}

/* Style for buttons */
.chat-popup-button {
  background-color: var(--terminal-bg) !important;
  background: var(--terminal-bg) !important;
  color: var(--terminal-primary) !important;
  border: 1px solid var(--terminal-border) !important;
  padding: 8px 16px !important;
  cursor: pointer !important;
  font-family: var(--terminal-font) !important;
  font-size: var(--terminal-font-size) !important;
}

.chat-popup-button:hover {
  background-color: var(--terminal-bg) !important;
  color: var(--terminal-warning) !important;
  border-color: var(--terminal-warning) !important;
  text-shadow: 0 0 2px var(--terminal-warning) !important;
}

#dice-notification > * > * {
  background-color: var(--terminal-bg) !important;
  background: var(--terminal-bg) !important;
  color: var(--terminal-text) !important;
}

/* Timestamps in popup */
#chat-popout .message-timestamp,
.chat-popout .message-timestamp,
#dice-notification .message-timestamp,
.dice-notification .message-timestamp,
.chat-popup .message-timestamp {
  color: var(--terminal-secondary) !important;
  font-size: calc(var(--terminal-font-size) - 2px) !important;
  background-color: var(--terminal-bg) !important;
}

/* === DIALOGS AND FORMS === */
/* Windows and all their internal elements - Background nuclear */
.dialog, .window-app,
.dialog *, .window-app *,
.dialog .window-frame, .window-app .window-frame,
.dialog .window-header, .window-app .window-header,
.dialog .window-content, .window-app .window-content,
.dialog .window-resizable-handle, .window-app .window-resizable-handle {
  background-color: var(--terminal-bg) !important;
  background: var(--terminal-bg) !important;
  background-image: none !important;
}

/* Window content - Normal text */
.dialog .window-content, 
.window-app .window-content {
  color: var(--terminal-text) !important;
  font-family: var(--terminal-font) !important;
  font-size: var(--terminal-font-size) !important;
}

/* Forms and internal dialogs - Normal text */
.dialog .dialog-content,
.window-app form,
.dialog form,
.window-app .window-content form {
  background-color: var(--terminal-bg) !important;
  color: var(--terminal-text) !important;
}

/* Dialog buttons */
.dialog .dialog-buttons,
.window-app .dialog-buttons {
  background-color: var(--terminal-bg) !important;
  border-top: 1px solid var(--terminal-border) !important;
}

/* Inputs and selects in forms - Cambio aquí: usa --terminal-text para texto normal, no primary */
.dialog input:not([type="checkbox"]):not([type="radio"]),
.window-app input:not([type="checkbox"]):not([type="radio"]),
.dialog textarea,
.window-app textarea,
.dialog select,
.window-app select {
  background-color: var(--terminal-bg) !important;
  color: var(--terminal-text) !important;  /* ¡Cambiado a --terminal-text para que use el color de texto normal! */
  border: 1px solid var(--terminal-border) !important;
  font-family: var(--terminal-font) !important;
  font-size: var(--terminal-font-size) !important;
}

/* Exclude icons from forced background styles */
.dialog *:not(i):not(.fa):not(.fas):not(.far):not(.fab):not(.fal):not(.fad):not([class*="fa-"]):not([class^="fa-"]),
.window-app *:not(i):not(.fa):not(.fas):not(.far):not(.fab):not(.fal):not(.fad):not([class*="fa-"]):not([class^="fa-"]) {
  background-color: var(--terminal-bg) !important;
  color: var(--terminal-text) !important;
}

/* Additional aggressive rules for normal text in forms and windows */
.window-content label,
.window-content p,
.window-content span,
.window-content div:not(.message-header):not(.message-sender):not(header),
.form-group label,
.form-group span,
.form-group p,
.form-group div,
.dialog-content label,
.dialog-content p,
.dialog-content span,
.dialog-content div {
  color: var(--terminal-text) !important;
}

/* === ICONS WITH SPECIFIC COLORS === */
/* Delete icons - Bright red */
a[data-action="delete"] i,
.item-delete i,
.control-icon.delete i,
a[title*="Delete"] i,
a[title*="Eliminar"] i,
.fa-trash:before,
.fa-times:before,
.fa-close:before {
  color: #ff4444 !important;
  text-shadow: 0 0 3px #ff4444, 0 0 6px #ff4444 !important;
}

/* Edit icons - Bright blue */
a[data-action="edit"] i,
.item-edit i,
.control-icon.edit i,
a[title*="Edit"] i,
a[title*="Editar"] i,
.fa-edit:before,
.fa-pencil:before,
.fa-pencil-alt:before {
  color: #4488ff !important;
  text-shadow: 0 0 3px #4488ff, 0 0 6px #4488ff !important;
}

/* Configure icons - Yellow */
a[data-action="configure"] i,
.item-config i,
.control-icon.configure i,
.fa-cog:before,
.fa-gear:before,
.fa-settings:before {
  color: #ffaa00 !important;
  text-shadow: 0 0 3px #ffaa00, 0 0 6px #ffaa00 !important;
}

/* View icons - Light green */
a[data-action="view"] i,
.item-view i,
.control-icon.view i,
.fa-eye:before {
  color: #00dd00 !important;
  text-shadow: 0 0 3px #00dd00, 0 0 6px #00dd00 !important;
}

/* Duplicate icons - Cyan */
a[data-action="duplicate"] i,
.item-duplicate i,
.control-icon.duplicate i,
.fa-copy:before,
.fa-clone:before {
  color: #00dddd !important;
  text-shadow: 0 0 3px #00dddd, 0 0 6px #00dddd !important;
}

/* Icons in right sidebar */
#sidebar .directory-item .item-controls a[data-action="edit"] i {
  color: #4488ff !important;
  text-shadow: 0 0 2px #4488ff !important;
}

#sidebar .directory-item .item-controls a[data-action="delete"] i {
  color: #ff4444 !important;
  text-shadow: 0 0 2px #ff4444 !important;
}

#sidebar .directory-item .item-controls a[data-action="duplicate"] i {
  color: #00dddd !important;
  text-shadow: 0 0 2px #00dddd !important;
}

#sidebar .directory-item .item-controls a[data-action="configure"] i {
  color: #ffaa00 !important;
  text-shadow: 0 0 2px #ffaa00 !important;
}

/* Tool icons in left bar - different colors */
#controls .control-tool:nth-child(1) i { color: #ff6666 !important; text-shadow: 0 0 3px #ff6666 !important; }
#controls .control-tool:nth-child(2) i { color: #66ff66 !important; text-shadow: 0 0 3px #66ff66 !important; }
#controls .control-tool:nth-child(3) i { color: #6666ff !important; text-shadow: 0 0 3px #6666ff !important; }
#controls .control-tool:nth-child(4) i { color: #ffff66 !important; text-shadow: 0 0 3px #ffff66 !important; }
#controls .control-tool:nth-child(5) i { color: #ff66ff !important; text-shadow: 0 0 3px #ff66ff !important; }
#controls .control-tool:nth-child(6) i { color: #66ffff !important; text-shadow: 0 0 3px #66ffff !important; }
#controls .control-tool:nth-child(7) i { color: #ffaa66 !important; text-shadow: 0 0 3px #ffaa66 !important; }
#controls .control-tool:nth-child(8) i { color: #aa66ff !important; text-shadow: 0 0 3px #aa66ff !important; }

/* Default icons - Terminal green */
i:not([class*="fa-"]):not(.colored-icon),
.fas:not(.colored-icon),
.far:not(.colored-icon),
.fab:not(.colored-icon) {
  color: var(--terminal-primary) !important;
}

/* Specific Foundry VTT icons */
.fa-dice-d20:before { color: #ff6b6b !important; text-shadow: 0 0 3px #ff6b6b !important; }
.fa-crosshairs:before { color: #4ecdc4 !important; text-shadow: 0 0 3px #4ecdc4 !important; }
.fa-users:before { color: #45b7d1 !important; text-shadow: 0 0 3px #45b7d1 !important; }
.fa-map:before { color: #96ceb4 !important; text-shadow: 0 0 3px #96ceb4 !important; }
.fa-music:before { color: #feca57 !important; text-shadow: 0 0 3px #feca57 !important; }
.fa-scroll:before { color: #ff9ff3 !important; text-shadow: 0 0 3px #ff9ff3 !important; }
.fa-book:before { color: #54a0ff !important; text-shadow: 0 0 3px #54a0ff !important; }
.fa-toolbox:before { color: #5f27cd !important; text-shadow: 0 0 3px #5f27cd !important; }

/* Sidebar with standard icons */
#sidebar .directory-item .entry-name {
  color: var(--terminal-text) !important;
  font-size: var(--terminal-font-size) !important;
}

#sidebar .directory-item {
  background-color: var(--terminal-bg) !important;
}

#sidebar .directory-item:nth-child(odd) {
  background-color: rgba(0, 204, 0, 0.03) !important;
}

#sidebar .directory-item:nth-child(even) {
  background-color: rgba(0, 170, 0, 0.03) !important;
}

/* Custom scrollbar */
* {
  scrollbar-width: thin;
  scrollbar-color: var(--terminal-primary) var(--terminal-bg);
}

*::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

*::-webkit-scrollbar-track {
  background-color: var(--terminal-bg);
  border: 1px solid var(--terminal-dim);
}

*::-webkit-scrollbar-thumb {
  background-color: var(--terminal-primary);
  border-radius: 0px;
  box-shadow: inset 0 0 3px var(--terminal-secondary);
}

*::-webkit-scrollbar-thumb:hover {
  background-color: var(--terminal-secondary);
  box-shadow: var(--terminal-glow);
}

/* Animation effects */
@keyframes blink {
  0%, 50% { opacity: 1; }
  51%, 100% { opacity: 0; }
}

/* Main content of windows */
.cyberpunk section.window-content {
  background-color: var(--terminal-bg) !important;
  color: var(--terminal-text);
  font-weight: normal;
  font-size: var(--terminal-font-size) !important;
  overflow-y: scroll;
  position: relative;
  border: 2px solid var(--terminal-border);
  box-shadow: var(--terminal-glow);
}

/* Text fields */
.cyberpunk .editor-content {
  background-color: var(--terminal-bg);
  color: var(--terminal-text);
  border: 1px solid var(--terminal-border);
  padding: 8px;
  font-size: var(--terminal-font-size) !important;
  text-shadow: var(--terminal-text-shadow);
}

/* Tab navigation */
.cyberpunk section.window-content nav.tabs {
  border-bottom: 2px solid var(--terminal-border);
  background-color: var(--terminal-bg);
  padding: 0;
}

.cyberpunk section.window-content nav.tabs > .item {
  background-color: var(--terminal-bg);
  color: var(--terminal-secondary);
  border: 1px solid var(--terminal-dim);
  margin-right: 2px;
  padding: 8px 14px;
  font-size: var(--terminal-font-size) !important;
  transition: all 0.3s ease;
  position: relative;
}

.cyberpunk section.window-content nav.tabs > .item::before {
  content: '[ ';
}

.cyberpunk section.window-content nav.tabs > .item::after {
  content: ' ]';
}

.cyberpunk section.window-content nav.tabs > .item.active {
  color: var(--terminal-primary);
  background-color: var(--terminal-bg);
  border-color: var(--terminal-border);
  box-shadow: var(--terminal-glow);
  text-shadow: var(--terminal-text-shadow);
}

.cyberpunk section.window-content nav.tabs > .item:hover {
  color: var(--terminal-primary);
  border-color: var(--terminal-secondary);
  text-shadow: var(--terminal-text-shadow);
}

/* Main titles */
.cyberpunk h1.title,
.cyberpunk h2 {
  font-family: var(--terminal-font);
  font-size: calc(var(--terminal-font-size) + 4px) !important;
  color: var(--terminal-primary);
  text-shadow: var(--terminal-text-shadow);
  border-bottom: 1px solid var(--terminal-border);
  position: relative;
  padding-left: 20px;
}

.cyberpunk h1.title::before,
.cyberpunk h2::before {
  content: '> ';
  position: absolute;
  left: 0;
  color: var(--terminal-primary);
  animation: blink 2s infinite;
}

.cyberpunk h1.title > input {
  background-color: transparent;
  border: none;
  color: var(--terminal-text);
  font-family: var(--terminal-font);
  font-size: calc(var(--terminal-font-size) + 4px) !important;
  font-weight: bold;
  text-shadow: var(--terminal-text-shadow);
}

/* Buttons */
button, .button {
  background-color: var(--terminal-bg) !important;
  color: var(--terminal-primary) !important;
  border: 1px solid var(--terminal-border) !important;
  font-family: var(--terminal-font) !important;
  font-size: var(--terminal-font-size) !important;
  text-shadow: var(--terminal-text-shadow) !important;
  transition: all 0.3s ease !important;
  padding: 6px 12px !important;
}

button:hover, .button:hover {
  box-shadow: var(--terminal-glow) !important;
  color: var(--terminal-bg) !important;
  background-color: var(--terminal-primary) !important;
}

/* === FIX FOR WHITE/GRAY SEPARATOR LINES === */

/* Specific form separators */
hr,
.separator,
.divider,
.form-group + .form-group,
.form-fields .form-group,
section.window-content .form-group {
  border-color: var(--terminal-border) !important;
  border-top-color: var(--terminal-border) !important;
  border-bottom-color: var(--terminal-border) !important;
}

/* Horizontal lines */
hr {
  background-color: var(--terminal-border) !important;
  border: 1px solid var(--terminal-border) !important;
  color: var(--terminal-border) !important;
}

/* Form containers */
.form-group,
.form-fields,
.form-header,
fieldset {
  border-color: var(--terminal-border) !important;
  border-top: 1px solid var(--terminal-border) !important;
  border-bottom: 1px solid var(--terminal-border) !important;
}

/* Specific Foundry elements */
.window-content form,
.window-content .form-group,
.window-content .form-fields,
section.tab[data-tab] {
  border-color: var(--terminal-border) !important;
}

/* Separators in tabs */
nav.tabs,
nav.tabs .item,
.tabs-content .tab {
  border-color: var(--terminal-border) !important;
}

/* Elements with inline or default borders */
[style*="border"],
[style*="border-top"],
[style*="border-bottom"],
[style*="border-left"],
[style*="border-right"] {
  border-color: var(--terminal-border) !important;
}

/* Outline for focused elements */
*:focus {
  outline-color: var(--terminal-primary) !important;
  box-shadow: 0 0 3px var(--terminal-primary) !important;
}

/* === CORRECTED WOUND TRACKER - INTERACTIVE AND VISUAL === */
.wound-tracker {
  display: flex;
  flex-wrap: wrap;
  flex-grow: 2;
  margin-right: -3px;
}

.wound-tracker .wound-state {
  display: flex;
  flex-grow: 1;
  flex-direction: column;
  height: fit-content;
  margin-right: 3px;
  margin-top: 5px;
  border: solid var(--terminal-border);
  border-width: 0px 2px 2px 2px;
}

.wound-tracker .wound-state-label {
  background-color: var(--terminal-bg);
  color: var(--terminal-text);
  font-size: smaller;
  font-variant: small-caps;
  padding: 2px;
  padding-left: 2px;
}

.wound-tracker .damageholder {
  display: flex;
  flex-grow: 1;
  height: 0.5em;
}

/* Interactive damage box */
.wound-tracker .damage {
  position: relative;
  height: 100%;
  width: 1.3em;
  flex-grow: 1;
  border-style: solid;
  border-width: 0px 1px 0px 1px;
  border-color: var(--terminal-border);
  border-radius: 0;
  margin: 0;
  padding: 0;
  cursor: pointer;
  font: inherit;
}

/* Visual layer for damage color */
.wound-tracker .damage::before {
  content: "";
  position: absolute;
  inset: 0;
  background-color: transparent;
  z-index: 1;
  pointer-events: none; /* doesn't block clicks */
}

/* Filled box */
.wound-tracker .damage.filled::before {
  background-color: var(--terminal-error);
}

/* Empty box */
.wound-tracker .damage.unfilled::before {
  background-color: transparent;
}

/* Hover: highlight */
.wound-tracker .damage:hover::before {
  background-color: rgba(204, 0, 0, 0.5);
}

/* Separators */
.wound-tracker .damage + .damage {
  border-left-width: 0px;
}
.wound-tracker .damage.leftmost {
  border-left-width: 0px;
}
.wound-tracker .damage.rightmost {
  border-right-width: 0px;
}

/* Hide unnecessary styles */
.wound-tracker .damage:checked {
  filter: none;
}

/* Chip toggle container */
.field.skill label.chip-toggle {
  background-color: var(--terminal-bg);
  display: flex;
  align-items: center;
  padding-right: 3px;
  position: relative; /* needed for pseudo-element */
  cursor: pointer;
}

/* Text inside chip */
.field.skill label.chip-toggle > * {
  font-variant: all-small-caps;
}

/* Hidden checkbox */
.field.skill input[type=checkbox] {
  display: none;
}

/* Chip image using pseudo-element */
.field.skill label.chip-toggle .chip-icon::before {
  content: "";
  display: block;
  width: 1.5em;
  height: 1.5em;
  background-image: url(../img/chip.png);
  background-size: cover;
  background-position: center;
  transition: opacity 0.2s ease-in-out;
  opacity: 1; /* activated state */
}

/* Activated chip */
.field.skill input[type=checkbox]:checked + .chip-icon::before {
  opacity: 1; /* fully visible */
}

/* SEARCH ICON */
.skill-top-matter div.search-icon {
  background-color: var(--terminal-bg) !important;
  background-image: url("../img/search.png") !important;
  background-size: cover !important;
  background-position: center !important;
  height: 1.5em;
  width: 1.5em;
  display: inline-block;
  z-index: 11;
  opacity: 1;
  transition: opacity 0.2s;
}

/* Media queries for responsiveness */
@media (max-width: 768px) {
  :root {
    --terminal-font-size: 18px;
  }
}



*,
*::before,
*::after {
  border-color: var(--terminal-border) !important;
}